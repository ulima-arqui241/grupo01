# Decisiones de diseño

| Codigo | Decisión de diseño                                                                                                            | Fundamentación                                                                                                          |
|--------|-------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
| DEC-04 | Submódulo de autenticación y autorización: Es responsable de gestionar el proceso de autenticación de usuarios, que se compone de la validación de credenciales en el log in, la generación de tokens (JWT) de sesión para mantener abierta una sesión móvil y la implementación de medidas de seguridad posterior a múltiples intentos fallidos. | La estructura lógica del submódulo será gestionada por AWS Cognito. Se utilizará un pool de usuarios en el que se almacenará los usuarios con correos, contraseñas y identificador único para posteriormente crear una instancia de los usuarios en nuestra base de datos relacional. Los usuario se almacenarán en una tabla llamada Persona, en la que se podrán agregar otras columnas como dirección, nacionalidad, dirección, entre otras. Se utilizarán reglas de registro al sistema, validación de correo, pérdida de contraseña e ingreso al sistema recomendadas por AWS Cognito y su documentación de buenas prácticas. Para realizar la creación de un registro en la base de datos relacional creada en Amazon RDS, se utilizará un disparador por cada usuario creado en el pool de usuarios de AWS Cognito. Los disparos utilizarán una función Lambda para gestionar la creación del registro en la base de datos, por lo que la comunicación se realizará por medio de una conexión segura (VPC) y se utilizará un RDS Proxy para gestionar la escritura de data en la base de datos. La seguridad (CRN01), rendimiento (CRN02) y mantenibilidad (CRN03) en el backend estarán asegurados por los servicios de AWS. |
| DEC-05 | Submódulo de API: El módulo será responsable de gestionar las funcionalidades de creación de perfiles, creación de instituciones, equipos, partidos y gestión de equipos en partidos. | Para desplegar el API, se utilizará un API Gateway que tendrá un WAF por delante para evitar los ataques DDOS y todos los usuarios tedrán que validar su acceso por medio del JWT generado por su usuario en AWS Cognito. Este API tendrá distintos endpoints que se comunicarán con distintas funciones Lambda que tendrán acceso a las VPCs de las bases de datos relacionales y no relacionales (Amazon RDS y DinamoDB). La restricción de escalabilidad dinámica (CON-4) está asegurada por medio de las políticas de expansión de almacenamiento y concurrencia de Amazon RDS, la seguridad (CON-5) está cubierta por las WAF, políticas de uso de API con JWTs y VPCs en las bases de datos.|
| DEC-09 | Submódulo de base de datos: Es crucial para almacenar y gestionar los datos de los usuarios de manera segura y eficiente, por lo que se usarán una base de datos relacional y no relacional | La data almacenada será gestionada de forma relacional para los usuarios, perfiles, equipos, partidos, y resultados. Sin embargo, la data generada por estadísticas de los usuarios, comentarios, notificaciones y otras funcionalidades futuras serán almacenadas en una instancia de DynamoDB y serán relacionadas por medio del identificador de documento en la Amazon RDS. La escalabilidad (CON-4) estará gestionada por las variables disponibles de aumento de almacenamiento disponibles por AWS. |

[Volver al inicio](../ADD.md)
